# =============================================================================
# SWAP BEHAVIOR
# =============================================================================

# Reduce VFS cache pressure to keep dentries/inodes in memory longer
# This improves file system metadata performance
# Default is 100; lower values favor keeping caches
vm.vfs_cache_pressure = 50

# =============================================================================
# DIRTY PAGE WRITEBACK
# =============================================================================

# Start flushing dirty pages to disk earlier but in smaller chunks
# Avoids large I/O bursts that can stall the system
vm.dirty_background_ratio = 5
vm.dirty_ratio = 20

# =============================================================================
# MEMORY RECLAIM TUNING
# =============================================================================

# Disable watermark boosting - can cause aggressive page reclaim due to fragmentation
vm.watermark_boost_factor = 0

# Increase the amount of free memory the kernel tries to maintain
# Allows for more background reclaim, reducing direct reclaim latency
vm.watermark_scale_factor = 125

# Disable swap readahead - optimization for compressed swap (zram/zswap)
# With compression, readahead doesn't help and wastes CPU
vm.page-cluster = 0

# Reduce unfairness in page locking to reduce tail latency
vm.page_lock_unfairness = 1

# =============================================================================
# MEMORY COMPACTION
# =============================================================================

# Disable proactive memory compaction to prevent system stutter.
# Compaction can cause significant latency spikes on desktop workloads.
vm.compaction_proactiveness = 0
